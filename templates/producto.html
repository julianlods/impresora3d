{% extends "base.html" %}
{% block title %}{{ p.name }} — El Sultán del Plástico{% endblock %}

{% block content %}
<nav class="text-sm text-gray-400 mb-4">
  <a href="{{ url_for('catalogo') }}" class="hover:text-yellow-500">Catálogo</a>
  {% if p.category %} / <a href="{{ url_for('categoria', slug=p.category.slug) }}" class="hover:text-yellow-500">{{ p.category.name }}</a>{% endif %}
  / <span class="text-gray-300">{{ p.name }}</span>
</nav>

<div class="grid gap-8 lg:grid-cols-2">
  <!-- Imagen -->
  <div class="bg-white border border-gray-200 rounded-xl p-4">
    {% set src = p.image_url %}
    <div class="w-full bg-gray-50 border border-gray-100 rounded-lg overflow-hidden" style="aspect-ratio: 4 / 3;">
      <img
        src="{{ src if src and src.startswith('http') else url_for('static', filename=(src or 'images/placeholder.png')) }}"
        alt="{{ p.name }}"
        class="w-full h-full object-contain"
      >
    </div>
  </div>

  <!-- Datos -->
  <div>
    <h1 class="text-3xl font-bold text-amber-700">{{ p.name }}</h1>

    <div class="mt-2 flex items-center gap-3">
      {% if p.category %}
        <a href="{{ url_for('categoria', slug=p.category.slug) }}"
           class="text-xs bg-gray-200 text-gray-800 border border-gray-300 px-2 py-1 rounded-full hover:bg-gray-300">
          {{ p.category.name }}
        </a>
      {% endif %}
      {% if p.slug %}
        <span class="text-xs text-gray-500">SKU: {{ p.slug }}</span>
      {% endif %}
    </div>

    {% if p.price %}
      <p class="mt-4 text-2xl font-bold text-gray-900">${{ p.price }}</p>
    {% endif %}

    {% if p.description %}
      <div class="mt-6 prose prose-invert max-w-none">
        <p>{{ p.description }}</p>
      </div>
    {% endif %}

    <div class="mt-8 flex gap-3">
      <a href="{{ url_for('catalogo') }}"
         class="bg-gray-900 text-white px-4 py-2 rounded-lg font-semibold hover:bg-black">
        Volver al catálogo
      </a>
      {% if p.category %}
        <a href="{{ url_for('categoria', slug=p.category.slug) }}"
           class="bg-gray-200 text-gray-900 px-4 py-2 rounded-lg font-semibold border border-gray-300 hover:bg-gray-300">
          Ver más en {{ p.category.name }}
        </a>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
